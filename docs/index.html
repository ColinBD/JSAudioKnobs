<!-- TO DO 
1) get the 2 sets of radio buttons working
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>JS Audio Knobs</title>
    <link rel="stylesheet" type="text/css" href="./styles.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />
    <script src="./jsaudioknobs/knobs.js"></script>
  </head>
  <body>
    <header id="title">
      <h1 id="titleHeader">Interactive Knob Builder</h1>
      <p id="authorInfo">
        for the JS Audio Knobs library. By Colin Bone Dodds (<a
          href="https://github.com/colinbd"
          >github.com/colinbd</a
        >)
      </p>
      <span id="forkBanner">
        <a href="https://github.com/ColinBD/JSAudioKnobs"
          ><img
            width="149"
            height="149"
            src="https://github.blog/wp-content/uploads/2008/12/forkme_left_red_aa0000.png?resize=149%2C149"
            class="attachment-full size-full"
            alt="Fork me on GitHub"
            data-recalc-dims="1"
        /></a>
      </span>
    </header>
    <section id="builder">
      <div id="formContainer">
        <form id="mainForm">
          <!-- ID -->
          <span id="hint"
            >what is the ID of the div you will be housing the knob in?</span
          ><br />
          div ID:
          <input
            type="text"
            id="id"
            onchange="changeID()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
          <!-- type -->
          <span id="hint">what style of knob would you like?</span><br />
          style:
          <select id="knobType" onChange="changeType()">
            <option value="LittlePhatty">LittlePhatty</option>
            <option value="Vintage">Vintage</option>
            <option value="FStyle">FStyle</option>
            <option value="SSLish">SSLish</option>
            <option value="RedScale">RedScale</option>
            <option value="Silver">Silver</option>
            <option value="Aqua">Aqua</option>
            <option value="kjLED">kjLED</option>
            <option value="Credence">Credence</option>
            <option value="Wedge">Wedge</option>
            <option value="Hexagonal">Hexagonal</option>
            <option value="Hippy">Hippy</option>
            <option value="Bluesbreaker">Bluesbreaker</option>
            <option value="Oscar">Oscar</option>
          </select>
          <br /><br />
          <!-- size -->
          <span id="hint">what size would you like the knob to be?</span><br />
          <input
            type="radio"
            value="xsmall"
            id="sizeXS"
            name="size"
            onchange="changeSize()"
          /><span id="radioSize">xsmall</span>
          <input
            type="radio"
            id="sizeS"
            value="small"
            name="size"
            onchange="changeSize()"
          /><span id="radioSize">small</span>
          <input
            type="radio"
            id="sizeM"
            value="medium"
            checked
            name="size"
            onchange="changeSize()"
          /><span id="radioSize">medium</span>
          <input
            type="radio"
            id="sizeL"
            value="large"
            name="size"
            onchange="changeSize()"
          /><span id="radioSize">large</span>
          <input
            type="radio"
            id="sizeXL"
            value="xlarge"
            name="size"
            onchange="changeSize()"
          /><span id="radioSize">xlarge</span><br /><br />
          <!-- min value -->
          <span id="hint"
            >what the minimum value the knob should output? you must set an
            integer value</span
          ><br />
          minimum:
          <input
            type="text"
            id="lowVal"
            onchange="changeLowVal()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
          <!-- max value -->
          <span id="hint"
            >what the maximum value the knob should output? you must set an
            integer value</span
          ><br />
          maximum:
          <input
            type="text"
            id="highVal"
            onchange="changeHighVal()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
          <!-- value -->
          <span id="hint">set the initial value for the knob</span><br />
          value:
          <input
            type="text"
            id="value"
            onchange="changeValue()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
          <!-- sensitivity -->
          <span id="hint"
            >how much should mouse moves change the knob? less than 1 will make
            it less sensitive to mouse movements, greater than 1 for greater
            sensitivity</span
          ><br />
          sensitivity:
          <input
            type="text"
            id="sensitivity"
            onchange="changeSensitivity()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
          <!-- label -->
          <!-- size -->
          <span id="hint"
            >do you want to see the knobs output value in a label below the
            knob?</span
          ><br />
          show the label?
          <input
            type="radio"
            name="lbl"
            id="lblShow"
            value="true"
            onchange="lblChanged()"
          /><span id="radioSize">show</span>
          <input
            type="radio"
            name="lbl"
            id="lblHide"
            value="false"
            onchange="lblChanged()"
          />hide<br /><br />
          <!-- lblTxtColor -->
          <span id="hint"
            >you can set the colour of the label just enter a css colour name or
            HEX code</span
          ><br />
          label colour:
          <input
            type="text"
            id="lblTxtColour"
            onchange="changeLblColour()"
            onkeypress="this.onchange()"
            onpaste="this.onchange()"
            oninput="this.onchange()"
          />
          <br /><br />
        </form>
        <button class="button" onclick="resetForm()">reset</button>
      </div>
    </section>
    <section id="output">
      <div id="knob"></div>
      <div id="objTxtWrapper">
        <div id="label">
          pass this object when creating a new class instance <br />
          e.g. let knob1 = new Knob({ <i>object goes here</i> })
        </div>
        <div id="objTxt"></div>
      </div>
    </section>

    <script>
      //the object that gets printed to the screen
      let objParams = {
        id: "knob",
        size: "medium",
        type: "LittlePhatty"
      };

      //the object which actuall builds the knob on screen - the ID param might be different
      let objRealParams = {
        id: "knob",
        size: "medium",
        type: "LittlePhatty"
      };

      //build the knob and place it on screen
      let knob = new Knob(objRealParams);

      //print the object to screen
      printObj();

      function printObj() {
        //get the keys and values of the object
        let keys = Object.keys(objParams);
        let values = Object.values(objParams);
        //print the objects opening curley brace
        document.getElementById("objTxt").innerHTML = "{<br />";
        //now print the contents of the object
        for (let i = 0; i < keys.length; i++) {
          // check which values need to be encased in quotation marks
          if (
            keys[i] == "id" ||
            keys[i] == "size" ||
            keys[i] == "type" ||
            keys[i] == "lblTxtColor"
          ) {
            document.getElementById("objTxt").innerHTML += `&nbsp&nbsp&nbsp${
              keys[i]
            }: "${values[i]}"`;
          } else {
            //value is not a string so no quotes needed
            document.getElementById("objTxt").innerHTML += `&nbsp&nbsp&nbsp${
              keys[i]
            }: ${values[i]}`;
          } //don't include a comma on the last item
          i == keys.length - 1
            ? (document.getElementById("objTxt").innerHTML += "<br>")
            : (document.getElementById("objTxt").innerHTML += ", <br>");
        }
        //print the objects closing curley brace
        document.getElementById("objTxt").innerHTML += "}";
      }

      //build the knob
      function buildKnob() {
        //first clone objParams into objRealParams
        objRealParams = JSON.parse(JSON.stringify(objParams));
        //change the ID to our real ID
        objRealParams.id = "knob";
        //clear the knob from the div
        document.getElementById("knob").innerHTML = "";
        //know re-add the knob
        knob = new Knob(objRealParams);
      }

      /***** form functions *****/

      //reset form
      function resetForm() {
        document.getElementById("mainForm").reset();
        objParams = {
          id: "knob",
          size: "medium",
          type: "LittlePhatty"
        };
        printObj();
        buildKnob();
      }

      //ID changed
      function changeID() {
        let txt = document.getElementById("id").value;
        if (txt == "") {
          delete objParams.id;
        } else {
          objParams.id = document.getElementById("id").value;
        }
        printObj();
        buildKnob();
      }

      //knob type changed
      function changeType() {
        objParams.type = document.getElementById("knobType").value;
        printObj();
        buildKnob();
      }

      //knob size changed
      function changeSize() {
        if (document.getElementById("sizeXS").checked == true) {
          objParams.size = "xsmall";
        } else if (document.getElementById("sizeS").checked == true) {
          objParams.size = "small";
        } else if (document.getElementById("sizeM").checked == true) {
          objParams.size = "medium";
        } else if (document.getElementById("sizeL").checked == true) {
          objParams.size = "large";
        } else if (document.getElementById("sizeXL").checked == true) {
          objParams.size = "xlarge";
        }
        printObj();
        buildKnob();
      }

      //knob lowVal changed
      function changeLowVal() {
        let txt = document.getElementById("lowVal").value;
        if (txt == "") {
          delete objParams.lowVal;
        } else {
          objParams.lowVal = parseInt(txt);
        }
        printObj();
        buildKnob();
      }

      //knob highVal changed
      function changeHighVal() {
        let txt = document.getElementById("highVal").value;
        if (txt == "") {
          delete objParams.highVal;
        } else {
          objParams.highVal = parseInt(txt);
        }
        printObj();
        buildKnob();
      }

      //knob value changed
      function changeValue() {
        let txt = document.getElementById("value").value;
        if (txt == "") {
          delete objParams.value;
        } else {
          objParams.value = parseInt(txt);
        }
        printObj();
        buildKnob();
      }

      //sensitivity changed
      function changeSensitivity() {
        let txt = document.getElementById("sensitivity").value;
        if (txt == "") {
          delete objParams.sensitivity;
        } else {
          objParams.sensitivity = parseInt(txt);
        }
        printObj();
        buildKnob();
      }

      //knob label changed
      function lblChanged() {
        if (document.getElementById("lblShow").checked == true) {
          objParams.label = true;
        } else if (document.getElementById("lblHide").checked == true) {
          objParams.label = false;
        }
        printObj();
        buildKnob();
      }

      //knob lblTxtColor changed
      function changeLblColour() {
        let txt = document.getElementById("lblTxtColour").value;
        if (txt == "") {
          delete objParams.lblTxtColor;
        } else {
          objParams.lblTxtColor = document.getElementById("lblTxtColour").value;
        }
        printObj();
        buildKnob();
      }
    </script>
    <footer></footer>
  </body>
</html>
